= Tetrix Architektur-Dokumentation
:toc:
:toclevels: 2
:icons: font

== 1. Analyse der Entwickler-Aufgabenstellung

* **Technologie-Stack**
** Kotlin-Desktop-Applikation auf der JVM
** GUI-Framework nach Absprache mit SWE-Dozent
* **Benutzeroberfläche**
** Vollbildmodus, angepasst an Beamer/Laptop
** Corporate Design der ABB-Technikerschule
* **Spielmechanik**
** Steuerung eines drehbaren Würfels („Rotor“), auf den fallende Spielsteine andocken
** Punkte- und Level-Mechanik, Spielende bei Maximaldurchmesser
* **Datenpersistenz**
** Spieldaten (Name, Punkte, Dauer, Datum)
** Speicherung wahlweise in lokaler Datei (Default) und in relationaler Datenbank via JDBC
** Anzeige einer Bestenliste (Top 10)
* **Versionierung & Lieferung**
** Git als VCS
** Auslieferung: IntelliJ-Projekt, ausführbare JAR und vollständige Dokumentation über MS Teams
* **Zeitplan**
** Prototyp & Requirements → Freigabe bis 22.05.2025
** Architektur-Beschreibung → Freigabe bis 26.06.2025
** Finaler Abgabe (inkl. Spiel & Doku) → 21.08.2025

== 2. Kontextsicht

[plantuml]
----
include::uml/Kontextsicht.plantuml[]
----

[cols="2,5",options="header"]
|===
| Externer Akteur / System      | Beschreibung
| Spieler                       | Bedient das Spiel über Tastatur/Maus (Drehung, Verschieben, Menü)
| Dateisystem (Datei)       | Standard-Speicherort für Spieldaten (CSV)
| Datenbank (JDBC)          | Relationale Persistenz (SQLite) für Spieldaten
| LibKtx          | Spiel Framework für Kotlin
| Tetrix          | Unser Spiel
|===

== 3. Bausteinsicht

[plantuml]
----
include::uml/Bausteinsicht.puml[]
----

[cols="3,6",options="header"]
|===
| Komponente                    | Verantwortlichkeiten
| Game (Facade)                 | Startet und initialisiert App und globale Singletons
| AssetManager (Singleton)      | Globale AssetManager um assets zu laden
| GameScreen                    | Screen für die haupt Widgets vom Game
| LoadingScreen                 | Ladebildschirm, der beim Starten angezeigt wird während Assets geladen werden
| MenuScreen                    | Hauptmenü, Titel und Buttons um das Spiel zu starten usw
| OptionsScreen                 | Seite um Einstellungen zu ändern
| ScoreScreen                   | Zeigt das Scoreboard an

| GameField                     | Stage für das Spielfeld
| CubeShape (Composite)         | Ein handler für eine Gruppe von cubes
| Cube                          | Ein Würfel des Spiels
| GameOverStage                 | GameOver View (score speichern, name eingeben & bestenliste)
| HighScoreWidget               | Zeigt den Highscore an
| ScoreWidget                   | Zeigt den aktuellen score an
| NextShapeWidget               | Zeigt die nächte Shape an
| StatWidget                    | Zeigt die Punkte von allen Shapes

| ScoreService (Singleton)      | Läd und speichert Scores & Benutzernamen
| ScoreboardFactory (Factory)   | Liefert konkrete Scoreboard-Instanzen basierend auf Konfiguration
| ScoreboardCsv                 | Speichert/liest Scores & Benutzernamen als CSV-Datei
| ScoreboardDatabase            | Speichert/liest Scores & Benutzernamen via JDBC (SQLite)
|===

=== 3.2 Verwendete Architektur- und Entwurfsmuster

[cols="2,5",options="header"]
|===
| Muster                          | Anwendung im Tetrix-Spiel
| Facade                          | Die Game-Klasse bietet eine vereinfachte Schnittstelle zu den komplexen Subsystemen des Spiels
| Singleton                       | AssetManager und ScoreService existieren als einzige Instanzen im System
| Factory                         | ScoreboardFactory erzeugt konkrete Implementierungen des ScoreboardRepository-Interfaces
| Strategy                        | Verschiedene Scoreboard-Implementierungen (CSV, Datenbank) können austauschbar verwendet werden
| Composite                       | CubeShape setzt sich aus mehreren Cube-Objekten zusammen
|===

== 4. Laufzeitsicht

=== 4.1 Sequenzdiagramm: Spielstart & Initialisierung

[plantuml]
----
include::uml/Sequenzdiagramm.puml[]
----

=== 4.2 Sequenzdiagramm: Stein-Fall

[plantuml]
----
include::uml/SteinFall.puml[]
----

=== 4.3 Sequenzdiagramm: Andocken

[plantuml]
----
include::uml/Andocken.puml[]
----

=== 4.4 Aktivitätsdiagramm: Spielende-Entscheidung

[plantuml]
----
include::uml/GameOver.puml[]
----
